{"ast":null,"code":"import _toConsumableArray from\"/home/martin/chat-app-example/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/martin/chat-app-example/web-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import useSocket from'hooks/useSocket';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import PeopleList from'./components/people-list/PeopleList';import ChatToolbar from'./components/chat-toolbar/ChatToolbar';import ChatText from'./components/chat-text/ChatText';import{withStyles,createStyles}from'@material-ui/core/styles';import Hidden from'@material-ui/core/Hidden';import LoginForm from'./components/login-form/LoginForm';var styles=createStyles({root:{margin:'16px',height:'calc(100vh - 32px)'},paper:{height:'100%'},gridContainer:{height:'inherit'},gridItem:{height:'100%'},'@global':{'body':{fontFamily:'\"Roboto\"'}}});var ChatRoom=function ChatRoom(props){var socket=useSocket('http://127.0.0.1:3000');var classes=props.classes;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];useEffect(function(){var handleUpdateUsers=function handleUpdateUsers(users){setUsers(_toConsumableArray(users));};if(socket){socket.on('UPDATE_USERS',handleUpdateUsers);}},[socket,users]);useEffect(function(){var handleUpdateMessages=function handleUpdateMessages(message){setMessages(function(messages){return[].concat(_toConsumableArray(messages),[message]);});};if(socket){socket.on('UPDATE_MESSAGES',handleUpdateMessages);}},[socket]);var addMessage=function addMessage(text){socket.emit('ADD_MESSAGE',text);};var addUser=function addUser(username){socket.emit('ADD_USER',username);};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(LoginForm,{onSubmit:addUser}),/*#__PURE__*/React.createElement(Paper,{className:classes.paper,elevation:2},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:0,className:classes.gridContainer},/*#__PURE__*/React.createElement(Hidden,{mdDown:true},/*#__PURE__*/React.createElement(Grid,{item:true,md:2,className:classes.gridItem},/*#__PURE__*/React.createElement(PeopleList,{users:users}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:10,className:classes.gridItem},/*#__PURE__*/React.createElement(ChatToolbar,null),/*#__PURE__*/React.createElement(ChatText,{messages:messages,handleSendButton:addMessage})))));};export default withStyles(styles)(ChatRoom);","map":{"version":3,"sources":["/home/martin/chat-app-example/web-client/src/views/chat/Chat.tsx"],"names":["React","useState","useEffect","useSocket","Paper","Grid","PeopleList","ChatToolbar","ChatText","withStyles","createStyles","Hidden","LoginForm","styles","root","margin","height","paper","gridContainer","gridItem","fontFamily","ChatRoom","props","socket","classes","messages","setMessages","users","setUsers","handleUpdateUsers","on","handleUpdateMessages","message","addMessage","text","emit","addUser","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport useSocket from 'hooks/useSocket'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport PeopleList from './components/people-list/PeopleList'\nimport ChatToolbar from './components/chat-toolbar/ChatToolbar'\nimport ChatText from './components/chat-text/ChatText'\nimport { withStyles, createStyles } from '@material-ui/core/styles'\nimport Hidden from '@material-ui/core/Hidden'\nimport LoginForm from './components/login-form/LoginForm'\n\nconst styles = createStyles({\n\troot: {\n\t\tmargin: '16px',\n\t\theight: 'calc(100vh - 32px)'\n\t},\n\tpaper: {\n\t\theight: '100%'\n\t},\n\tgridContainer: {\n\t\theight: 'inherit'\n\t},\n\tgridItem: {\n\t\theight: '100%'\n\t},\n\t'@global': {\n\t\t'body': {\n\t\t\tfontFamily: '\"Roboto\"'\n\t\t}\n\t}\n})\n\ninterface IProps {\n    classes: {\n        root: string\n        paper: string\n        gridContainer: string\n        gridItem: string\n        '@global': string\n    }\n    addMessage?: Function\n}\n\nconst ChatRoom: React.FC<IProps> = props => {\n        const socket: any = useSocket('http://127.0.0.1:3000')\n\n        const { classes } = props\n        \n        const [messages, setMessages] = useState<Array<any>>([]);\n        const [users, setUsers] = useState<Array<any>>([]);\n\n        useEffect(() => {\n            const handleUpdateUsers = (users: any) => {\n                setUsers([...users])\n            }\n\n            if (socket) {\n                socket.on('UPDATE_USERS', handleUpdateUsers)\n            }\n        }, [socket, users])\n\n        useEffect(() => {\n            const handleUpdateMessages = (message: any) => {\n                setMessages(messages => [...messages, message])\n            }\n\n            if (socket) {\n                socket.on('UPDATE_MESSAGES', handleUpdateMessages)\n            }\n        }, [socket])\n\n        const addMessage = (text: string) => {\n            socket.emit('ADD_MESSAGE', text)\n        }\n\n        const addUser = (username: string) => {\n            socket.emit('ADD_USER', username)\n        }\n    \n\t\treturn (\n\t\t\t<div className={classes.root}>\n                <LoginForm onSubmit={addUser} />\n\t\t\t    <Paper className={classes.paper} elevation={2}>\n\t\t\t\t\t<Grid container spacing={0} className={classes.gridContainer}>\n\t\t\t\t\t\t<Hidden mdDown>\n\t\t\t\t\t\t\t<Grid item md={2} className={classes.gridItem}>\n\t\t\t\t\t\t\t\t<PeopleList users={users} />\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t\t<Grid item xs={12} md={10} className={classes.gridItem}>\n\t\t\t\t\t\t\t<ChatToolbar />\n\t\t\t\t\t\t\t<ChatText messages={messages} handleSendButton={addMessage} />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Paper>\n\t\t\t</div>\n\t\t)\n}\n\nexport default withStyles(styles)(ChatRoom)\n"]},"metadata":{},"sourceType":"module"}